@import '~styles/variables';
@import '~styles/responsive';

$curl_size_width: 6vw;
$curl_size_height: 4vw;

$phone_ratio: 3;

@function phone_open_size($size) {
  @return $size * 2;
}

@function open_size($size) {
  @return $size * 3;
}

@mixin clipPath($height, $width) {
  // clip-path: polygon(0 0, /*a*/ 48% /*b*/ 100%, 100% $height); //left side
  clip-path: polygon(100% 0%, /*a*/ 43% /*b*/ 95%, 0% $height); //right side

  @include for-phone-only {
    clip-path: polygon(
      100% 0%,
      /*a*/ 43% /*b*/ 95%,
      0% ($height * $phone_ratio)
    ); //right side
  }
}
.curl {
  filter: drop-shadow(0px 0px 8px $color_drop_shadow);

  transition: all 0.5s ease-in;
}

.curlBkg {
  width: $curl_size_width; /* default width of page curl */
  height: $curl_size_height; /* default height of page curl */
  position: absolute;
  left: 0;
  top: 0;
  background: white;
  transition: inherit;
  clip-path: polygon(0% 0%, 100% 0%, 0% 100%); // left side
  // clip-path: polygon(0% 0%, 100% 0%, 100% 100%); // right side

  @include for-phone-only {
    width: $curl_size_width * $phone_ratio; /* default width of page curl */
    height: $curl_size_height * $phone_ratio; /* default height of page curl */
  }
}

.curlContent {
  position: absolute;
  object-fit: cover;
  left: -5px;
  // right: 5px;
}

.curlPage {
  /* the curl itself */
  transition: inherit;

  position: absolute;
  display: block;
  content: '';
  width: $curl_size_width;
  height: $curl_size_width;
  left: 0;
  top: 0;
  @include clipPath($curl_size_height, $curl_size_width);

  @include for-phone-only {
    width: $curl_size_width * $phone_ratio; /* default width of page curl */
    height: $curl_size_width * $phone_ratio; /* default height of page curl */
  }

  // background: linear-gradient(
  //   40deg,
  //   hsla(0, 0%, 85%, 0.9) 15%,
  //   $color_main,
  //   hsla(0, 0%, 60%, 0.9) 85%
  // ); //right side

  background: linear-gradient(
    315deg,
    hsla(0, 0%, 85%, 0.9) 15%,
    $color_main,
    hsla(0, 0%, 60%, 0.9) 85%
  ); //left side
}

.curlCode {
  width: 100vw;
  // max-width: 100vw;

  font-size: 0.75em;
  line-height: 1em;
}

.curl:hover {
  filter: drop-shadow(0px 0px 30px $color_drop_shadow);

  .curlBkg {
    width: open_size($curl_size_width);
    height: open_size($curl_size_height);
    transition: inherit;

    box-shadow: 10px 10px $color_main;

    @include for-phone-only {
      width: phone_open_size(
        $curl_size_width * $phone_ratio
      ); /* default width of page curl */
      height: phone_open_size(
        $curl_size_height * $phone_ratio
      ); /* default height of page curl */
    }
  }

  .curlPage {
    width: open_size($curl_size_width);
    height: open_size($curl_size_width);

    z-index: 1000;

    @include clipPath(
      open_size($curl_size_height),
      open_size($curl_size_width)
    );

    @include for-phone-only {
      width: phone_open_size(
        $curl_size_width * $phone_ratio
      ); /* default width of page curl */
      height: phone_open_size(
        $curl_size_width * $phone_ratio
      ); /* default height of page curl */

      @include clipPath(
        phone_open_size($curl_size_height),
        phone_open_size($curl_size_width)
      );
    }
  }
}
